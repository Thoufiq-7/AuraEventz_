<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Dashboard - AuraEventz</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/manager_dashboard.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>AuraEventz</h3>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="{{ url_for('manager_dashboard') }}" class="active">Dashboard</a></li>
                    <li><a href="{{ url_for('manager_post_job') }}">Post a New Job</a></li>
                    <li><a href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <h1>Welcome, Manager!</h1>
            </header>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            <section class="stats-cards">
                <div class="card">
                    <h2>12</h2>
                    <p>Total Jobs Posted</p>
                </div>
                <div class="card">
                    <h2>5</h2>
                    <p>Open Positions</p>
                </div>
                <div class="card">
                    <h2>142</h2>
                    <p>Total Applications</p>
                </div>
                <div class="card action-card">
                    <a href="{{ url_for('manager_post_job') }}" class="btn btn-primary">Post a New Job</a>
                </div>
            </section>

            <section class="recent-jobs">
                <h2>Manage Your Job Postings</h2>
                <div class="table-container">
                    <table class="job-table">
                        <thead>
                            <tr>
                                <th>Job Title</th>
                                <th>Date Posted</th>
                                <th>Status</th>
                                <th>Applications</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if jobs %}
                            {% for job in jobs %}
                            <tr>
                                <td>{{ job.title }}</td>
                                <td>{{ job.posted_on }}</td>
                                <td><span class="status active">{{ job.status }}</span></td>
                                <td>
                                    <a href="{{ url_for('view_applicants', job_id=job.id) }}">{{ job.app_count }}
                                        View</a>
                                </td>
                                <td>
                                    <a href="{{ url_for('edit_job', job_id=job.id) }}"
                                        class="btn btn-secondary">Edit</a>
                                    <form action="{{ url_for('delete_job', job_id=job.id) }}" method="POST"
                                        style="display:inline;"
                                        onsubmit="return confirm('Are you sure you want to delete this job posting?');">
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                            {% else %}
                            <tr>
                                <td colspan="4" style="text-align:center; padding: 20px;">You have not posted any jobs
                                    yet.</td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>
</body>

</html>